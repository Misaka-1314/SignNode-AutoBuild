---
title: 自建节点
icon: iconfont icon-creative
category:
  - Advance
sticky: true
star: true
order: 5
---

## 自建节点介绍

+ 自建节点是由用户自行搭建签到节点，用于签到服务。
+ 既能设置密码仅供自己和朋友使用，也能公开给大家使用。
+ 第三方节点与官方节点的差异，请参考 [第三方节点介绍](../guide/第三方节点.md)。

### 版本选择

|          |  exe版（推荐）  |       Python版        |       Docker版        |
| :------: | :-------------: | :-------------------: | :-------------------: |
| 适合人群 | 会用Windows电脑 | 有编程经验或Linux经验 | 有NAS经验或Linux经验  |
| 功能差异 |        /        |           /           | 仅支持 amd64 和 arm64 |

:::warning
如果选择exe以外的版本，群里可能不会有人指导你。
:::

::: tabs

@tab exe版本（推荐）

[exe下载链接](https://cx-static.waadri.top/download/other-signin-node.exe)

1. 双击运行，首次运行会在当前位置生成 `node_config.yaml` 配置文件。
2. 将 `node_config.yaml` 中的 `name` 修改为你喜欢的节点名称，除uuid外的其它选项可自行修改也可保持默认。
3. 再次双击运行。

@tab Pyhton版

[Python下载链接](https://cx-static.waadri.top/download/other-signin-node.py)

1. 安装好 `python3.10+` 环境
2. 使用以下命令运行，运行后将自动检测并安装运行所需的第三方库
```bash
wget -O "main.py" "https://cx-static.waadri.top/download/other-signin-node.py" && python3 main.py
```
1. 将 `node_config.yaml` 中的 `name` 修改为你喜欢的节点名称，除uuid外的其它选项可自行修改也可保持默认。
2. 再次运行。

@tab Docker版

群管理构建的镜像 `ccr.ccs.tencentyun.com/misaka-public/waadri-sign-node`（仅支持 `amd64` 和 `arm64`），可直接使用以下命令拉取镜像。

```bash
docker pull ccr.ccs.tencentyun.com/misaka-public/waadri-sign-node
```

镜像使用 Github Action 构建，详见 [构建脚本](https://github.com/Misaka-1314/SignNode-AutoBuild)

将配置文件目录下运行，首次运行会生成 `node_config.yaml` 配置文件。

#### 参考命令行（按需自行修改）

```bash
docker run -d \
    --name=sign-node \
    -v $(pwd):/data \
    --restart=always \
    --dns=223.5.5.5 --dns=114.114.114.114 \
    ccr.ccs.tencentyun.com/misaka-public/waadri-sign-node
```

#### 参考 Docker compose（以 1Panel 为例，按需自行修改）
```
networks:
    1panel-network:
        external: true
        
services:
    AutoSign:
        container_name: ChaoXing-AutoSign
        image: ccr.ccs.tencentyun.com/misaka-public/waadri-sign-node
        volumes:
            - ./data:/data
        networks:
            - 1panel-network
        restart: always
```

#### 进阶使用
此部分是 [Misaka](https://github.com/Misaka-1314) 对原始代码的篡改，未经 WAADRI 的授权。

```
networks:
    1panel-network:
        external: true
        
services:
    AutoSign:
        container_name: ChaoXing-AutoSign
        image: ccr.ccs.tencentyun.com/misaka-public/waadri-sign-node
        volumes:
            - ./data:/data
        networks:
            - 1panel-network
        restart: always
        environment:
            - HAPPY=王者峡谷，等你来战
            - PHOTO=xxx
```

:::

### 配置文件

配置文件展示：

```yaml
# 配置文件修改时注意在单引号内填写，不熟悉yaml文件格式的用户可在 https://www.json.cn/yaml-editor/ 中进行编辑并确认无误后粘贴回配置文件
# 邮件功能配置区
email:
  # 用来发送邮件的邮箱地址如XXX@qq.com，未填写则不发送邮件
  address: ''
  # 用来发送邮件的邮箱密码，某些邮箱可能需要填写授权码
  password: ''
  # 是否使用tls或ssl加密连接，默认true为使用加密连接，如不使用请填false，需注意大小写
  use_tls: true
  # 发送邮件服务器的host主机名，如QQ邮箱的发送邮件服务器主机名为smtp.qq.com
  host: ''
  # 发送邮件服务器端口号，请注意上方配置使用tls的状态，两种状态下的端口号一般不同
  port: 465
  # 发件人名称，可自行填写想让接收方看到的发件人名称，不填写则接收方看到的名称为发送人邮件地址
  user: ''
# 节点名称、密码和人数配置区
node:
  # 节点名称，不能和已接入在线自动签到系统的其它第三方节点名称重复
  name: ''
  # 节点密码，设置后用户需要在网站中输入正确的密码才能使用该节点，留空则为不设置密码，此时任何人均可使用该节点进行签到
  password: ''
  # 限制节点使用人数，0为不限制使用人数
  limit: 0
# 是否开启用户频繁信息显示，关闭后当用户使用接口2或接口3出现“请勿频繁操作”提示后将不会在控制台展示此类信息，默认true为显示，不显示请填false，需注意大小写
show_frequently: true
# 是否开启夜间签到监控，当关闭时接口2和接口3将在每日23时至次日6时暂停使用上述接口用户的签到监控，可尽量避免夜间频繁请求导致接口出现频繁提示，此配置不影响接口1在夜间进行监控，默认true为开启夜间监控，如不开启请填false，需注意大小写
night_monitor: true
# 是否启用debug模式，启用后日志输出更加详细，方便排查问题，建议使用时出现问题且命令行中未展示问题详细信息时再启用，默认false为不输出，要输出debug日志请填true，需注意大小写
debug: false
# 节点uuid，第一次启动程序时会随机生成，请勿更改，否则无法匹配已经使用该节点启动监控的用户信息
uuid: XXX
```

1. 怎么配置邮箱？
::: tabs

@tab QQ 邮箱

1. 登录 [QQ 邮箱](https://mail.qq.com)
2. 点击 “设置” -> “账号与安全” -> "安全设置" -> "POP3/SMTP/IMAP" -> "开启IMAP/SMTP服务" -> “生成授权码”，授权码就是邮箱密码。
3. 将授权码填入配置文件中的 `password` 字段。

参考配置：
```yaml
email:
  address: 'Misaka-1314@qq.com'
  password: 'password'
  use_tls: true
  host: 'smtp.qq.com'
  port: 465
  user: '御坂 20001号'
node:
  name: '测试节点'
  password: ''
  limit: 0
show_frequently: true
night_monitor: true
debug: false
uuid: XXX
```

@tab 网易邮箱

敬请期待。

:::